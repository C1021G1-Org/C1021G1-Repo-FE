<body>
<div id="layout" class="container-fluid">
  <h1>Quản lý vé bán</h1>
  <div class="row">
    <div class="col-2"></div>
    <div class="col-10 d-flex justify-content-between">
      <div class="form-inline">
        <button class="btn btn-primary">Tìm vé trống
          <!--          <i class="fa fa-user-plus" aria-hidden="true"></i>-->
        </button>
      </div>
      <div class="form-inline">
        <div class="input-group-prepend">
          <label class="mr-sm-2" style="color: white">Tìm kiếm theo:</label>
        </div>
        <div class="mr-2">
          <select #option class="custom-select" id="inputGroupSelect01">
            <option value="code" selected>Mã đặt chỗ:</option>
            <option value="buyer">Người đi:</option>
            <option value="fromFlight">Tuyến Bay đi:</option>
            <option value="toFlight">Tuyến Bay về:</option>
          </select>
        </div>
        <input #keyword class="form-control mr-sm-2" type="search" placeholder="Tìm kiếm" aria-label="Search">
        <button class="btn btn-info my-2 my-sm-8" type="submit"
                (click)="searchTicket(option.value, keyword.value)">
          <i class="fa fa-search" aria-hidden="true"></i>
        </button>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-2">
      <table class="table table-side-bar">
        <thead class="table-dark">
        <tr>
          <th>
            Chức Năng
          </th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td>
            <a href="">Thông tin Admin</a>
          </td>
        </tr>
        <tr>
          <td>
            <a href="">Quản lý nhân viên</a>
          </td>
        </tr>
        <tr>
          <td>
            <a href="">Thống kê</a>
          </td>
        </tr>
        <tr>
          <td>
            <a href="">Quản lý vé bán</a>
          </td>
        </tr>
        </tbody>
      </table>
    </div>

    <div class="col-10">
      <table class="table table-striped table-bordered">
        <thead class="table-dark">
        <tr>
          <th class="text-center extra-small">STT</th>
          <th class="text-center medium">Tên người đi</th>
          <th class="text-center small">Mã đặt chỗ</th>
          <th class="text-center extra-medium">Tuyến bay</th>
          <th class="text-center small">Ngày đi</th>
          <th class="text-center small">Tổng tiền (VNĐ)</th>
          <th class="text-center small">Loại vé</th>
          <th class="text-center medium">Trạng thái</th>
          <th class="text-center small">Thao Tác</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let ticket of tickets, index as i">
          <th class="text-center">{{i + 1}}</th>
          <td>{{ticket.buyerTicket}}</td>
          <td class="text-center">{{ticket.codeTicket}}</td>
          <td>{{ticket.fromFlight}}-{{ticket.toFlight}}</td>
          <td>{{ticket.dateStart | date:'dd/MM/yyyy'}}</td>
          <td class="text-center">{{ticket.priceTicket}}</td>
          <td class="text-center">{{ticket.nameSeatType}}</td>
          <td class="text-center" *ngIf="ticket.statusTicket == false; else elseStatus"
              style="color: red">{{ticket.statusTicket ? 'Đã thanh toán' : 'Chưa thanh toán'}}</td>
          <!--                                         true = 1           false = 0           -->
          <ng-template #elseStatus>
            <td class="text-center"
                style="color: deepskyblue">{{ticket.statusTicket ? 'Đã thanh toán' : 'Chưa thanh toán'}}</td>
            <!--                                      true = 1          false = 0             -->
          </ng-template>

          <td class="text-center">
            <div class="dropdown">
              <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"
                      aria-expanded="false">
              </button>

              <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton" style="padding: 0 1px">
                <a class="dropdown-item">In vé</a>
                <a class="dropdown-item">Sửa</a>
                <a (click)="deleteTicket(ticket.idTicket)" class="dropdown-item">Xóa</a>
              </div>
            </div>
          </td>

        </tr>
        </tbody>
      </table>
      <!--    phân trang-->
      <div class="mt-3">
        <div class="row d-flex justify-content-center">
          <nav aria-label="Page navigation example">
            <ul class="pagination">
              <li class="page-item">

                <a
                  (click)="firstPage(option.value, keyword.value)"
                  [class.disableButton]="indexPagination <= 0"
                  class="page-link" style="color: black" aria-label="Firsts">
                  <span aria-hidden="true">&laquo;</span>
                </a>
              </li>
              <li class="page-item">
                <a [class.disableButton]="indexPagination <= 0"
                   (click)="previousPage(option.value, keyword.value)"
                   class="page-link" style="color: black" aria-label="Previous">
                  <span aria-hidden="true">&lt;</span>
                </a>
              </li>
              <li class="page-item"><a class="page-link" style="color: black; cursor: not-allowed">{{indexPagination + 1}}</a></li>
              <li class="page-item"><a class="page-link" style="color: black; cursor: not-allowed">/</a></li>
              <li class="page-item"><a class="page-link" style="color: black; cursor: not-allowed">{{totalPagination + 1}}</a></li>

              <li class="page-item">
                <a
                  (click)="nextPage(option.value, keyword.value)"
                  [class.disableButton]="indexPagination >= totalPagination"
                  class="page-link" style="color: black" aria-label="Next">
                  <span aria-hidden="true">&gt;</span>
                </a>
              </li>
              <li class="page-item">
                <a (click)="lastPage(option.value, keyword.value)"
                   [class.disableButton]="indexPagination >= totalPagination"
                   class="page-link" style="color: black" aria-label="LastPage">
                  <span aria-hidden="true">&raquo;</span>
                </a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
